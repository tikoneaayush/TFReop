<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Admin Dashboard</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    * {
      font-family: 'Inter', sans-serif;
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      background: #f8f9fa;
      min-height: 100vh;
    }
    .main-container {
      display: flex;
      min-height: 100vh;
    }
    .sidebar {
      width: 280px;
      background: #ffffff;
      box-shadow: 2px 0 10px rgba(0, 0, 0, 0.05);
      padding: 0;
      position: fixed;
      height: 100vh;
      overflow-y: auto;
      transition: transform 0.3s ease;
    }
    .sidebar-header {
      padding: 40px 20px;
      text-align: center;
      background: linear-gradient(135deg, #ff7b29 0%, #9c27b0 100%);
      color: white;
    }
    .sidebar img {
      width: 90px;
      height: 90px;
      border-radius: 50%;
      object-fit: cover;
      border: 4px solid rgba(255, 255, 255, 0.4);
      margin-bottom: 15px;
      transition: transform 0.3s ease;
    }
    .sidebar img:hover {
      transform: scale(1.05);
    }
    .sidebar h5 {
      color: white;
      font-weight: 700;
      font-size: 1.3rem;
      margin-bottom: 5px;
    }
    .sidebar p {
      color: rgba(255, 255, 255, 0.9);
      font-size: 0.9rem;
      margin-bottom: 0;
    }
    .sidebar-nav {
      padding: 20px 0;
    }
    .sidebar a {
      display: flex;
      align-items: center;
      text-decoration: none;
      color: #444;
      font-size: 1rem;
      font-weight: 600;
      padding: 14px 25px;
      margin: 4px 15px;
      border-radius: 8px;
      transition: all 0.3s ease;
    }
    .sidebar a:hover {
      background: #ff7b29;
      color: white;
      transform: translateX(5px);
    }
    .sidebar a.active {
      background: #ff7b29;
      color: white;
    }
    .sidebar a i {
      width: 20px;
      margin-right: 12px;
      text-align: center;
      font-size: 1.1rem;
    }
    .btn-logout {
      background: linear-gradient(135deg, #9c27b0 0%, #b039c4 100%);
      color: white;
      border: none;
      padding: 12px 20px;
      border-radius: 8px;
      font-weight: 600;
      font-size: 0.9rem;
      cursor: pointer;
      margin: 20px 15px;
      transition: all 0.3s ease;
      width: calc(100% - 30px);
      box-shadow: 0 2px 8px rgba(156, 39, 176, 0.2);
    }
    .btn-logout:hover {
      background: linear-gradient(135deg, #8b1a9f 0%, #a02bb3 100%);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(156, 39, 176, 0.3);
    }
    .main-content {
      flex: 1;
      margin-left: 280px;
      padding: 40px;
      background: #f8f9fa;
    }
    .page-header {
      background: white;
      border-radius: 12px;
      padding: 25px 30px;
      margin-bottom: 30px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
      border: none;
      position: relative;
    }
    .page-header::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 5px;
      background: linear-gradient(90deg, #ff7b29 0%, #9c27b0 100%);
      border-top-left-radius: 12px;
      border-top-right-radius: 12px;
    }
    .page-header h1 {
      color: #2d2d2d;
      font-weight: 800;
      font-size: 2.2rem;
      margin: 0;
    }
    .stats-container {
      display: grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap: 25px;
      margin-bottom: 40px;
    }
    .money-card {
      background: white;
      border-radius: 12px;
      padding: 30px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
      border-left: 5px solid #ff7b29;
      position: relative;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      text-align: center;
      cursor: pointer;
    }
    .money-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
    }
    .inkind-card {
      background: white;
      border-radius: 12px;
      padding: 30px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
      border-left: 5px solid #4caf50;
      position: relative;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      text-align: center;
      cursor: pointer;
    }
    .inkind-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
    }
    .stats-card {
      background: white;
      border-radius: 12px;
      padding: 30px;
      text-align: center;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
      border-left: 5px solid #9c27b0;
      position: relative;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      cursor: pointer;
    }
    .stats-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
    }
    .stats-icon {
      font-size: 2rem;
      margin-bottom: 10px;
    }
    .events-icon {
      color: #9c27b0;
    }
    .money-icon {
      color: #ff7b29;
    }
    .inkind-icon {
      color: #4caf50;
    }
    .stats-number {
      font-size: 2.5rem;
      font-weight: 800;
      margin-bottom: 8px;
    }
    .money-card .stats-number { color: #ff7b29; }
    .inkind-card .stats-number { color: #4caf50; }
    .stats-card .stats-number { color: #9c27b0; }
    .stats-label {
      color: #666;
      font-size: 0.95rem;
      font-weight: 500;
    }
    .stats-sub {
      font-size: 0.85rem;
      color: #888;
      margin-top: 5px;
    }
    .period-dropdown {
      position: absolute;
      top: 10px;
      right: 10px;
      padding: 5px;
      font-size: 0.9rem;
    }
    .details-section {
      background: white;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
      overflow: hidden;
      display: none;
    }
    .details-header {
      background: #ff7b29;
      color: white;
      padding: 20px 30px;
      border-bottom: none;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .details-header h5 {
      margin: 0;
      font-weight: 700;
      font-size: 1.2rem;
    }
    .details-table {
      margin: 0;
    }
    .details-table thead th {
      background: #f8f9fa;
      color: #333;
      font-weight: 600;
      font-size: 0.9rem;
      padding: 15px 20px;
      border: none;
      border-bottom: 2px solid #e5e7eb;
      text-transform: uppercase;
    }
    .details-table tbody td {
      padding: 15px 20px;
      border: none;
      border-bottom: 1px solid #f0f0f0;
      color: #444;
      font-weight: 500;
      vertical-align: middle;
      font-size: 0.95rem;
    }
    .details-table tbody tr:nth-child(even) {
      background: #fafafa;
    }
    .details-table tbody tr:hover {
      background: #f1f5f9;
    }
    @media (max-width: 992px) {
      .sidebar {
        transform: translateX(-100%);
      }
      .sidebar.show {
        transform: translateX(0);
      }
      .main-content {
        margin-left: 0;
        padding: 30px;
      }
      .stats-container {
        grid-template-columns: 1fr;
      }
      .details-header {
        flex-direction: column;
        gap: 10px;
      }
    }
    @media (max-width: 576px) {
      .main-content {
        padding: 20px;
      }
      .page-header {
        padding: 20px 25px;
      }
      .page-header h1 {
        font-size: 1.5rem;
      }
      .money-card, .inkind-card, .stats-card {
        padding: 20px;
      }
      .details-header {
        font-size: 1.2rem;
      }
      .details-table thead th,
      .details-table tbody td {
        font-size: 0.85rem;
        padding: 12px 15px;
      }
    }
  </style>
  <script src="logout.js"></script>
</head>
<body>
<div class="main-container">
  <!-- Sidebar Placeholder -->
  <div id="sidebar-placeholder"></div>

  <!-- Main Content -->
  <div class="main-content">
    <div class="page-header">
      <h1>Dashboard</h1>
    </div>

    <!-- Stats Cards -->
    <div class="stats-container">
      <div class="money-card">
        <div class="stats-icon money-icon">
          <i class="fas fa-donate"></i>
        </div>
        <div class="stats-number" id="totalMoney">₹0</div>
        <div class="stats-label">Amount Raised</div>
        <div class="stats-sub" id="moneyBreakdown"></div>
      </div>
      <div class="inkind-card">
        <div class="stats-icon inkind-icon">
          <i class="fas fa-gift"></i>
        </div>
        <div class="stats-number" id="totalInKindDonors">0</div>
        <div class="stats-label">In-Kind Donations</div>
        <div class="stats-sub" id="inKindBreakdown"></div>
      </div>
      <div class="stats-card">
        <div class="events-icon">
          <i class="fas fa-calendar-check"></i>
        </div>
        <div class="stats-number" id="totalEvents">0</div>
        <div class="stats-label">Total Events</div>
        <select class="period-dropdown" id="periodSelect" onchange="updateEventsCount()">
          <option value="all">All</option>
          <option value="weekly">Weekly</option>
          <option value="monthly">Monthly</option>
          <option value="quarterly">Quarterly</option>
          <option value="yearly">Yearly</option>
        </select>
      </div>
    </div>

    <!-- Details Section -->
    <div class="details-section" id="detailsSection">
      <div class="details-header">
        <i class="fas fa-list"></i>
        <h5>View Details</h5>
      </div>
      <div class="card-body p-0">
        <table class="table table-hover mb-0 details-table" id="detailsTable"></table>
      </div>
    </div>

    <!-- Modals -->
    <div class="modal fade" id="moneyModal" tabindex="-1" aria-labelledby="moneyModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="moneyModalLabel">Money Donation Details</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body" id="moneyModalBody">
            <table>
              <thead>
                <tr>
                  <th>Event</th>
                  <th>Amount</th>
                  <th>Date</th>
                </tr>
              </thead>
              <tbody id="moneyTableBody"></tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <div class="modal fade" id="inKindModal" tabindex="-1" aria-labelledby="inKindModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="inKindModalLabel">In-Kind Donation Details</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body" id="inKindModalBody">
            <table>
              <thead>
                <tr>
                  <th>Event</th>
                  <th>Item</th>
                  <th>Quantity</th>
                  <th>Date</th>
                </tr>
              </thead>
              <tbody id="inKindTableBody"></tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script type="module">
  // Dynamically load sidebar content
  fetch('sidebar.html')
    .then(response => response.text())
    .then(html => {
      document.getElementById('sidebar-placeholder').innerHTML = html;
      const currentPage = window.location.pathname.split('/').pop() || 'adminDash.html';
      document.querySelectorAll('.sidebar-nav a').forEach(link => {
        link.classList.remove('active');
        const href = link.getAttribute('href');
        if (href === currentPage) {
          link.classList.add('active');
        }
      });
    })
    .catch(error => console.error('Error loading sidebar:', error));

  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.0/firebase-app.js";
  import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/11.6.0/firebase-database.js";
  
  const firebaseConfig = {
    apiKey: "AIzaSyDkLmo4Vf-1U8Vl_grn2waMigYCyMj1BaU",
    authDomain: "formtestsgft.firebaseapp.com",
    databaseURL: "https://formtestsgft-default-rtdb.firebaseio.com",
    projectId: "formtestsgft",
    storageBucket: "formtestsgft.firebasestorage.app",
    messagingSenderId: "688396867961",
    appId: "1:688396867961:web:8cc2136b755be21f4f77a8"
  };

  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);

  let eventsData = {};
  let donationsData = {};
  let inkindItems = {};

  // Fetch in-kind items
  const inkindRef = ref(db, 'inkindItems');
  onValue(inkindRef, (snapshot) => {
    inkindItems = snapshot.val() || {};
    updateDashboard();
  }, (error) => console.error('Error fetching inkind items:', error));

  // Fetch all events
  const eventsRef = ref(db, 'events');
  onValue(eventsRef, (snapshot) => {
    eventsData = snapshot.val() || {};
    updateDashboard();
  }, (error) => console.error('Error fetching events:', error));

  // Fetch donations
  const donationsRef = ref(db, 'donations');
  onValue(donationsRef, (snapshot) => {
    donationsData = snapshot.val() || {};
    updateDashboard();
  }, (error) => console.error('Error fetching donations:', error));

  const updateDashboard = () => {
    const currentDate = new Date('2025-06-23T16:18:00+05:30'); // 04:18 PM IST, June 23, 2025
    let totalMoney = 0;
    let totalInKindDonations = 0;

    // Calculate amount raised and in-kind donations from 'donations' node, only if status is 'Received'
    for (let email in donationsData) {
      if (donationsData.hasOwnProperty(email)) {
        const userDonations = donationsData[email];
        for (let donationId in userDonations) {
          if (userDonations.hasOwnProperty(donationId)) {
            const donation = userDonations[donationId];
            if (donation.donationType === 'money' && donation.status === 'Received') {
              totalMoney += parseFloat(donation.amountOrItem) || 0;
            } else if (donation.donationType === 'inKind' && donation.status === 'Received') {
              totalInKindDonations++;
            }
          }
        }
      }
    }

    document.getElementById('totalMoney').textContent = '₹' + totalMoney.toLocaleString();
    document.getElementById('totalInKindDonors').textContent = totalInKindDonations;
  };

  const updateEventsCount = () => {
    filterEvents();
  };

  // Add event listeners after DOM is loaded
  document.addEventListener('DOMContentLoaded', () => {
    const moneyCard = document.querySelector('.money-card');
    const inkindCard = document.querySelector('.inkind-card');
    const statsCard = document.querySelector('.stats-card');

    moneyCard.addEventListener('click', () => showDetails('money'));
    inkindCard.addEventListener('click', () => showDetails('inkind'));
    statsCard.addEventListener('click', () => showDetails('events'));
  });

  function showDetails(type) {
    const detailsSection = document.getElementById('detailsSection');
    const table = document.getElementById('detailsTable');
    detailsSection.style.display = 'block';

    // Dynamically set table headers based on type
    let theadHTML = '<thead><tr>';
    if (type === 'money') {
      theadHTML += `
        <th><i class="fas fa-hashtag me-1"></i> SR. NO.</th>
        <th><i class="fas fa-user me-1"></i> Full Name</th>
        <th><i class="fas fa-envelope me-1"></i> Email</th>
        <th><i class="fas fa-list me-1"></i> Sub Option</th>
        <th><i class="fas fa-money-bill-wave me-1"></i> Amount</th>
        <th><i class="fas fa-calendar-check me-1"></i> Received Date</th>
      `;
    } else if (type === 'inkind') {
      theadHTML += `
        <th><i class="fas fa-hashtag me-1"></i> SR. NO.</th>
        <th><i class="fas fa-user me-1"></i> Full Name</th>
        <th><i class="fas fa-envelope me-1"></i> Email</th>
        <th><i class="fas fa-list me-1"></i> Sub Option</th>
        <th><i class="fas fa-gift me-1"></i> Item</th>
        <th><i class="fas fa-calendar-check me-1"></i> Received Date</th>
      `;
    } else if (type === 'events') {
      theadHTML += `
        <th><i class="fas fa-hashtag me-1"></i> SR. NO.</th>
        <th><i class="fas fa-calendar-day me-1"></i> Event Name</th>
        <th><i class="fas fa-calendar me-1"></i> Date</th>
        <th><i class="fas fa-users me-1"></i> No. of Beneficiary</th>
        <th><i class="fas fa-donate me-1"></i> Donation</th>
      `;
    }
    theadHTML += '</tr></thead>';
    table.innerHTML = theadHTML + '<tbody></tbody>';

    const tbody = document.querySelector("#detailsTable tbody");
    tbody.innerHTML = '';

    if (type === 'events') {
      let eventsArray = Object.entries(eventsData).map(([id, event]) => ({ id, ...event }));
      if (eventsArray.length === 0) {
        tbody.innerHTML = '<tr><td colspan="5">No events found.</td></tr>';
        document.getElementById('totalEvents').textContent = 0;
        return;
      }
      let i = 1;
      eventsArray.forEach(event => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${i++}</td>
          <td>${event.title || 'N/A'}</td>
          <td>${event.date ? new Date(event.date).toLocaleDateString() : 'N/A'}</td>
          <td>${event.peopleBenefitted || 0}</td>
          <td>${event.donations ? (event.donations.type === 'money' ? `₹${event.donations.amount || 0}` : `${event.donations.quantity || 0} x ${inkindItems[event.donations.itemId] || 'N/A'}`) : 'N/A'}</td>
        `;
        tbody.appendChild(row);
      });
      document.getElementById('totalEvents').textContent = tbody.getElementsByTagName('tr').length;
    } else if (type === 'money') {
      let moneyDonations = [];
      for (let email in donationsData) {
        if (donationsData.hasOwnProperty(email)) {
          const userDonations = donationsData[email];
          for (let donationId in userDonations) {
            if (userDonations.hasOwnProperty(donationId)) {
              const donation = userDonations[donationId];
              if (donation.donationType === 'money' && donation.status === 'Received') {
                moneyDonations.push({ id: donationId, email, ...donation });
              }
            }
          }
        }
      }
      if (moneyDonations.length === 0) {
        tbody.innerHTML = '<tr><td colspan="6">No money donations received.</td></tr>';
        return;
      }
      let i = 1;
      moneyDonations.forEach(donation => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${i++}</td>
          <td>${donation.fullName || 'N/A'}</td>
          <td>${donation.email || 'N/A'}</td>
          <td>${donation.subOption || 'N/A'}</td>
          <td>₹${(parseFloat(donation.amountOrItem) || 0).toLocaleString()}</td>
          <td>${donation.receivedDate ? new Date(donation.receivedDate).toLocaleDateString() : 'N/A'}</td>
        `;
        tbody.appendChild(row);
      });
    } else if (type === 'inkind') {
      let inkindDonations = [];
      for (let email in donationsData) {
        if (donationsData.hasOwnProperty(email)) {
          const userDonations = donationsData[email];
          for (let donationId in userDonations) {
            if (userDonations.hasOwnProperty(donationId)) {
              const donation = userDonations[donationId];
              if (donation.donationType === 'inKind' && donation.status === 'Received') {
                inkindDonations.push({ id: donationId, email, ...donation });
              }
            }
          }
        }
      }
      if (inkindDonations.length === 0) {
        tbody.innerHTML = '<tr><td colspan="6">No in-kind donations received.</td></tr>';
        return;
      }
      let i = 1;
      inkindDonations.forEach(donation => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${i++}</td>
          <td>${donation.fullName || 'N/A'}</td>
          <td>${donation.email || 'N/A'}</td>
          <td>${donation.subOption || 'N/A'}</td>
          <td>${donation.amountOrItem || 'N/A'}</td>
          <td>${donation.receivedDate ? new Date(donation.receivedDate).toLocaleDateString() : 'N/A'}</td>
        `;
        tbody.appendChild(row);
      });
    }
  }

  const filterEvents = () => {
    const sortPeriod = document.getElementById('sortSelect')?.value || 'all';
    const filterType = document.getElementById('filterSelect')?.value || 'all';
    const period = document.getElementById('periodSelect').value;
    const tbody = document.querySelector("#detailsTable tbody");
    if (document.getElementById('detailsSection').style.display === 'block' && (sortPeriod !== 'all' || filterType !== 'all')) {
      tbody.innerHTML = '';
      const currentDate = new Date('2025-06-23T16:18:00+05:30');
      let eventsArray = Object.entries(eventsData).map(([id, event]) => ({ id, ...event }));

      eventsArray = eventsArray.filter(event => {
        if (!event.date) return false;
        const eventDate = new Date(event.date);
        const diffDays = Math.floor((currentDate - eventDate) / (1000 * 60 * 60 * 24));
        if (period !== 'all') {
          if (period === 'weekly' && diffDays > 7) return false;
          if (period === 'monthly' && diffDays > 30) return false;
          if (period === 'quarterly' && diffDays > 90) return false;
          if (period === 'yearly' && diffDays > 365) return false;
        }
        if (filterType !== 'all') {
          if (filterType === 'money' && (!event.donations || event.donations.type !== 'money')) return false;
          if (filterType === 'inkind' && (!event.donations || event.donations.type !== 'inkind')) return false;
        }
        return true;
      });

      if (eventsArray.length === 0) {
        tbody.innerHTML = '<tr><td colspan="5">No events found.</td></tr>';
        document.getElementById('totalEvents').textContent = 0;
        return;
      }

      let i = 1;
      eventsArray.forEach(event => {
        let donationDisplay = 'N/A';
        if (event.donations) {
          if (event.donations.type === 'money') {
            donationDisplay = `₹${event.donations.amount || 0} (${event.donations.subType || 'N/A'})`;
          } else if (event.donations.type === 'inkind') {
            const itemName = inkindItems[event.donations.itemId] || 'Unknown Item';
            donationDisplay = `${event.donations.quantity || 0} x ${itemName}`;
          }
        }
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${i++}</td>
          <td>${event.title || 'N/A'}</td>
          <td>${event.date ? new Date(event.date).toLocaleDateString() : 'N/A'}</td>
          <td>${event.peopleBenefitted || 0}</td>
          <td>${donationDisplay}</td>
        `;
        tbody.appendChild(row);
      });

      document.getElementById('totalEvents').textContent = tbody.getElementsByTagName('tr').length;
    }
  };

  function showMoneyDetails() {
    const tbody = document.getElementById('moneyTableBody');
    tbody.innerHTML = '';
    for (let id in eventsData) {
      const event = eventsData[id];
      if (event.donations && event.donations.type === 'money' && event.date) {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${event.title || 'Untitled'}</td>
          <td>₹${(parseFloat(event.donations.amount) || 0).toLocaleString()}</td>
          <td>${new Date(event.date).toLocaleDateString()}</td>
        `;
        tbody.appendChild(row);
      }
    }
    new bootstrap.Modal(document.getElementById('moneyModal')).show();
  }

  function showInKindDetails() {
    const tbody = document.getElementById('inKindTableBody');
    tbody.innerHTML = '';
    for (let id in eventsData) {
      const event = eventsData[id];
      if (event.donations && event.donations.type === 'inkind' && event.donations.itemId && event.date) {
        const itemName = inkindItems[event.donations.itemId] || 'Unknown Item';
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${event.title || 'Untitled'}</td>
          <td>${itemName}</td>
          <td>${event.donations.quantity || 0}</td>
          <td>${new Date(event.date).toLocaleDateString()}</td>
        `;
        tbody.appendChild(row);
      }
    }
    new bootstrap.Modal(document.getElementById('inKindModal')).show();
  }
</script>